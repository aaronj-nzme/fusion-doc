

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating and Using Output Types &mdash; Fusion-Doc 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Creating a Feature Component" href="feature.html" />
    <link rel="prev" title="Fusion Docuementation - 2.3" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Fusion-Doc
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Components:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Creating and Using Output Types</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-are-output-types">What are Output Types?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-output-types">Using Output Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#writing-our-first-component">Writing our First Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="#seeing-some-output">Seeing Some Output</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="feature.html">Creating a Feature Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout.html">Creating a Layout Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="chain.html">Creating a Chain Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="event-handling.html">Event Handling and Interaction</a></li>
</ul>
<p class="caption"><span class="caption-text">Data:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="content-source.html">Defining a Content Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment.html">Using Environment Variables and “Secrets”</a></li>
<li class="toctree-l1"><a class="reference internal" href="consumer-hoc.html">Using the Consumer Higher-Order Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="fetching-content.html">Fetching Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuring-content.html">Dynamically Configuring Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="content-filtering.html">Content Filtering in Fusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="site-properties.html">Using Site Properties</a></li>
</ul>
<p class="caption"><span class="caption-text">General:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Folder.html">Examining the Feature Pack</a></li>
<li class="toctree-l1"><a class="reference internal" href="style.html">Adding Styling to Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom-fields.html">Adding Custom Fields to Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="display-properties.html">Working with Display Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="isomorphic-server-spa.html">Isomorphic vs. Server vs. SPA rendering</a></li>
<li class="toctree-l1"><a class="reference internal" href="messga-between-components.html">Messaging Between Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom-error-page.html">Using Custom Error Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="return-non-html-content-type.html">Creating a Web API Returning a Non-HTML Content Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="service-work.html">Using Service Workers with Fusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="local-webpack-states-file.html">Locally Generated Webpack Stats File</a></li>
<li class="toctree-l1"><a class="reference internal" href="static-features-outside-of-fusion.html">Including Static Features Outside of Fusion</a></li>
</ul>
<p class="caption"><span class="caption-text">Best Practices:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bp.html">Best Practices</a></li>
</ul>
<p class="caption"><span class="caption-text">Hooks:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="hooks-configuring-content.html">Dynamically Configuring Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="hooks-fetching-content.html">Fetching Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="hooks-event-handling.html">Event Handling and Interaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="hooks.html">React Hooks</a></li>
</ul>
<p class="caption"><span class="caption-text">API:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api-output.html">Output Type API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-feature.html">Feature API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-layout.html">Layout API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-chain.html">Chain API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-custom-fields.html">Custom Fields API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-consumer.html">Consumer API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-context.html">Context Component API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-content.html">Content Component API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-static.html">Static Component API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-content-source.html">Content Source API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-plugins.html">Plugins API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-local-development-mock.html">Local Mocks API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-site-properties.html">Site Properties API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-fusion-http.html">Fusion HTTP API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Fusion-Doc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Creating and Using Output Types</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/output.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-and-using-output-types">
<h1>Creating and Using Output Types<a class="headerlink" href="#creating-and-using-output-types" title="Permalink to this headline">¶</a></h1>
<p>Now that we’re all set up with our Fusion environment and repo, we can finally write some code! You’ll want to make sure your development server is running and displaying log messages;</p>
<div class="section" id="what-are-output-types">
<h2>What are Output Types?<a class="headerlink" href="#what-are-output-types" title="Permalink to this headline">¶</a></h2>
<p>The first component we want to create in our Feature Pack is a default Output Type component. You can think of an Output Type component as the outer “shell” of our HTML web page. It defines the <code class="docutils literal notranslate"><span class="pre">&lt;head&gt;</span></code> element and its contents, as well as parts of the <code class="docutils literal notranslate"><span class="pre">&lt;body&gt;</span></code> including the root element of our React application.</p>
<p>Every Fusion rendered web page needs to have an Output Type component. Output Types are the only type of component in our Feature Pack that are <strong>exclusively</strong> rendered server side - because they contain the actual root of the HTML web page itself, they can’t be re-rendered client side. For this reason, Output Type components are a useful injection point for static resources like stylesheets, scripts and more that should be included in the HTML source code of our web page.</p>
</div>
<div class="section" id="using-output-types">
<h2>Using Output Types<a class="headerlink" href="#using-output-types" title="Permalink to this headline">¶</a></h2>
<p>We can have multiple Output Type components in our Feature Pack, each for different purposes. Common use cases for additional Output Types include rendering specifically for mobile devices, or for platforms like Google AMP that require special configuration. As long as the page the user requests has an <code class="docutils literal notranslate"><span class="pre">outputType=</span></code> query parameter in the URL, the value of that parameter will be the name of the Output Type component used to render the page. If there is no Output Type component found by that name, Fusion falls back to the default Output Type component.</p>
</div>
<div class="section" id="writing-our-first-component">
<h2>Writing our First Component<a class="headerlink" href="#writing-our-first-component" title="Permalink to this headline">¶</a></h2>
<p>To create our first Output Type component, we’ll create a new file in the <code class="docutils literal notranslate"><span class="pre">/components/output-types/</span></code> directory named <code class="docutils literal notranslate"><span class="pre">default.jsx</span></code>. The name <code class="docutils literal notranslate"><span class="pre">default</span></code> is important because it denotes to Fusion that this is the Output Type we should use unless a different one is specified.</p>
<p>Here’s the code for our first Output Type component:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/*    /components/output-types/default.jsx    */

import React from &#39;react&#39;

export default (props) =&gt; {
  return (
    &lt;html&gt;
      &lt;head&gt;
        &lt;title&gt;{props.metaValue(&#39;title&#39;) || &#39;Default Title&#39;}&lt;/title&gt;
        &lt;props.MetaTags /&gt;
        &lt;props.Libs /&gt;
        &lt;props.CssLinks /&gt;
        &lt;link rel=&#39;icon&#39; type=&#39;image/x-icon&#39; href={props.deployment(`${props.contextPath}/resources/img/favicon.ico`)} /&gt;
        &lt;link rel=&#39;stylesheet&#39; href=&#39;https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css&#39; /&gt;
      &lt;/head&gt;
      &lt;body&gt;
        &lt;h1&gt;Welcome to Fusion!&lt;/h1&gt;
        &lt;div id=&#39;fusion-app&#39; className=&#39;col-12&#39;&gt;
          {props.children}
        &lt;/div&gt;
        &lt;props.Fusion /&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  )
}
</pre></div>
</div>
<p>Let’s walk through what is happening in this short (but dense) code snippet.</p>
<p>The short story is: we are exporting a React <a class="reference external" href="https://reactjs.org/docs/components-and-props.html#functional-and-class-components">functional component</a> that accepts <code class="docutils literal notranslate"><span class="pre">props</span></code> as an argument, and immediately returns some JSX as its output. Most of this output is simply part of the standard HTML skeleton of our web page (e.g. the <code class="docutils literal notranslate"><span class="pre">&lt;html&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;head&gt;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&lt;body&gt;</span></code> tags).</p>
<p>If we wanted to include static resources like links to stylesheets, third-party scripts or other code that should be rendered server side only at a specific point in the <code class="docutils literal notranslate"><span class="pre">&lt;head&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;body&gt;</span></code> tags, we could add that to our Output Type component like we normally would in an HTML web page. In this example, we’re loading <a class="reference external" href="https://getbootstrap.com/docs/3.3/">Bootstrap CSS</a> into our page from a CDN, so we can prototype rapidly with a grid system.</p>
<p>The parts of our component that are unique and interesting to Fusion are the <code class="docutils literal notranslate"><span class="pre">props</span></code> we are using to render dynamic portions of the page. Let’s look at them in the order they’re used:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&lt;props.MetaValue</span> <span class="pre">name='title'</span> <span class="pre">/&gt;</span></code> gets a meta value by name (in this case, the page title) that was set in the Admin and prints it. Here, we’re just using plain JS to fallback to a Default Title if the metaValue doesn’t exist.</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;props.MetaTags</span> <span class="pre">/&gt;</span></code> renders <code class="docutils literal notranslate"><span class="pre">&lt;meta&gt;</span></code> tags for any meta info provided to us by the Admin.</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;props.Libs</span> <span class="pre">/&gt;</span></code> includes the client side React library, as well as the component specific script for our single page app to render itself and handle events. Without this line, our code won’t work client side!</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;props.CssLinks</span> <span class="pre">/&gt;</span></code> renders <code class="docutils literal notranslate"><span class="pre">&lt;link&gt;</span></code> tags for stylesheets that are generated based on any CSS files imported into the components being used on this page. We could have alternatively inlined our CSS for platforms like AMP that require it.</li>
<li><code class="docutils literal notranslate"><span class="pre">props.deployment</span></code> is a function that wraps our local resources with a version number, so static resources included with different deployment versions don’t collide.</li>
<li><code class="docutils literal notranslate"><span class="pre">props.contextPath</span></code> is a helper that returns the root web path of our page. We can use it to prefix URLs we want to include on the page, like for our favicon above.</li>
<li><code class="docutils literal notranslate"><span class="pre">props.children</span></code> is a React standard prop, but for our purposes it will include all the other components (layouts, chains, and features) that were configured in the Admin to exist on the page. Without it, none of the content on our page gets displayed.</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;props.Fusion</span> <span class="pre">/&gt;</span></code> bootstraps data from the server that will hydrate our React components.</li>
</ul>
<p>One more subtle but important piece of code is the <code class="docutils literal notranslate"><span class="pre">id='fusion-app'</span></code> attribute applied to the <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> tag in our page body. It’s important that this <code class="docutils literal notranslate"><span class="pre">id</span></code> exists and is precisely <code class="docutils literal notranslate"><span class="pre">fusion-app</span></code>, as this will be the hook that Fusion looks for to re-mount the app on the client side. Without it our application won’t know what element to mount to on the page, and thus won’t work client side.</p>
</div>
<div class="section" id="seeing-some-output">
<h2>Seeing Some Output<a class="headerlink" href="#seeing-some-output" title="Permalink to this headline">¶</a></h2>
<p>We’re finally at the stage where we can start seeing something on a webpage! To do so, we’ll need to go into the <a class="reference external" href="http://localhost/pf/admin">PageBuilder Admin</a> and define a sample page to work with.</p>
<blockquote>
<div><p><strong>NOTE</strong></p>
<p>At this point, you may need to restart your Fusion application for it to “see” the new Output Type file you’ve created. To do so, hit <code class="docutils literal notranslate"><span class="pre">CTRL+C</span></code> and then re-run <code class="docutils literal notranslate"><span class="pre">npx</span> <span class="pre">fusion</span> <span class="pre">start</span></code>. Because of the way Webpack works, Fusion often doesn’t know about newly created components until the application is restarted. If you create a new file and it doesn’t show up in PageBuilder as expected, this may be the problem.</p>
</div></blockquote>
<p>Let’s create a page called “Homepage” at the path <code class="docutils literal notranslate"><span class="pre">/homepage</span></code> (or if you already have a Homepage, you can use any name/path combination). Once you’ve created your page, you should be redirected to the Page Editor view, with a preview on the right. That preview pane won’t show any content from our Output Type component - the preview pane only shows content <em>within</em> the Output Type. However, if we publish the page and make it “live”, then visit <a class="reference external" href="http://localhost/homepage">http://localhost/homepage</a>, we should see our webpage with a big “Welcome to Fusion” message at the top! Huzzah!</p>
<p>Now that we know our Output Type is working, we can remove the “Welcome to Fusion” header since we won’t need it. Onward!</p>
<blockquote>
<div><p><strong>NOTE</strong></p>
<p>If you see an error message about the Output Type component not being found, or if the page isn’t rendering, you may need to trigger a manual rebuild of the bundle. You can do so by running <code class="docutils literal notranslate"><span class="pre">npx</span> <span class="pre">fusion</span> <span class="pre">rebuild</span></code> from the root of the repo.</p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="feature.html" class="btn btn-neutral float-right" title="Creating a Feature Component" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Fusion Docuementation - 2.3" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Guess Me

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>