

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Adding Custom Fields to Components &mdash; Fusion-Doc 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Working with Display Properties" href="display-properties.html" />
    <link rel="prev" title="Adding Styling to Components" href="style.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Fusion-Doc
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Components:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="output.html">Creating and Using Output Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="feature.html">Creating a Feature Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout.html">Creating a Layout Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="chain.html">Creating a Chain Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="event-handling.html">Event Handling and Interaction</a></li>
</ul>
<p class="caption"><span class="caption-text">Data:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="content-source.html">Defining a Content Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment.html">Using Environment Variables and “Secrets”</a></li>
<li class="toctree-l1"><a class="reference internal" href="consumer-hoc.html">Using the Consumer Higher-Order Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="fetching-content.html">Fetching Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuring-content.html">Dynamically Configuring Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="content-filtering.html">Content Filtering in Fusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="site-properties.html">Using Site Properties</a></li>
</ul>
<p class="caption"><span class="caption-text">General:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Folder.html">Examining the Feature Pack</a></li>
<li class="toctree-l1"><a class="reference internal" href="style.html">Adding Styling to Components</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Adding Custom Fields to Components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-are-custom-fields">What are Custom Fields?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#custom-fields-as-proptypes">Custom Fields as PropTypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inline-editing">Inline Editing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="display-properties.html">Working with Display Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="isomorphic-server-spa.html">Isomorphic vs. Server vs. SPA rendering</a></li>
<li class="toctree-l1"><a class="reference internal" href="messga-between-components.html">Messaging Between Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom-error-page.html">Using Custom Error Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="return-non-html-content-type.html">Creating a Web API Returning a Non-HTML Content Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="service-work.html">Using Service Workers with Fusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="local-webpack-states-file.html">Locally Generated Webpack Stats File</a></li>
<li class="toctree-l1"><a class="reference internal" href="static-features-outside-of-fusion.html">Including Static Features Outside of Fusion</a></li>
</ul>
<p class="caption"><span class="caption-text">Best Practices:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bp.html">Best Practices</a></li>
</ul>
<p class="caption"><span class="caption-text">Hooks:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="hooks-configuring-content.html">Dynamically Configuring Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="hooks-fetching-content.html">Fetching Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="hooks-event-handling.html">Event Handling and Interaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="hooks.html">React Hooks</a></li>
</ul>
<p class="caption"><span class="caption-text">API:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api-output.html">Output Type API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-feature.html">Feature API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-layout.html">Layout API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-chain.html">Chain API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-custom-fields.html">Custom Fields API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-consumer.html">Consumer API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-context.html">Context Component API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-content.html">Content Component API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-static.html">Static Component API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-content-source.html">Content Source API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-plugins.html">Plugins API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-local-development-mock.html">Local Mocks API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-site-properties.html">Site Properties API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-fusion-http.html">Fusion HTTP API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Fusion-Doc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Adding Custom Fields to Components</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/custom-fields.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="adding-custom-fields-to-components">
<h1>Adding Custom Fields to Components<a class="headerlink" href="#adding-custom-fields-to-components" title="Permalink to this headline">¶</a></h1>
<p>Custom Fields are an especially useful tool when building websites with Fusion and PageBuilder. As their name suggests, Custom Fields allow developers and editors to set arbitrary (i.e. “custom”) data (i.e. “fields”) on individual instances of Features and Chains in Fusion, which can then be used to change the look, feel or behavior of that particular component.</p>
<div class="section" id="what-are-custom-fields">
<h2>What are Custom Fields?<a class="headerlink" href="#what-are-custom-fields" title="Permalink to this headline">¶</a></h2>
<p>Custom Fields are simply key/value pairs assigned to an individual Feature or Chain. The key names are defined in their respective components, and the values for each component instance are set in the PageBuilder Admin. This allows Feature Pack developers to define and use data relevant to their components, and for PageBuilder editors to decide how individual components should behave.</p>
<p>Common use cases for Custom Fields include setting headings or text that should be customizable for each Feature, styling attributes, and content configurations that allow PageBuilder editors to assign content sources to components.</p>
</div>
<div class="section" id="custom-fields-as-proptypes">
<h2>Custom Fields as PropTypes<a class="headerlink" href="#custom-fields-as-proptypes" title="Permalink to this headline">¶</a></h2>
<p>Custom Fields can be added to either Features or Chains in a Feature Pack. Both define Custom Fields in the same way - using React’s <a class="reference external" href="https://reactjs.org/docs/typechecking-with-proptypes.html">PropTypes</a> standard to denote the name and type of data the Custom Field is expecting.</p>
<p>Custom Fields can be added to both functional components and class-based components. Here’s an example using the <code class="docutils literal notranslate"><span class="pre">MovieDetail</span></code> component we defined in the “Creating a Feature Component” guide:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/*  /components/features/movies/movie-detail.jsx  */

import PropTypes from &#39;prop-types&#39;
import Consumer from &#39;fusion:consumer&#39;
import React, { Component, Fragment } from &#39;react&#39;

@Consumer
class MovieDetail extends Component {
  render () {
    const { Actors, Director, Plot, Poster, Rated, Title, Writer, Year } = this.props.globalContent

    // We can extract our custom field values here, and even set default values if desired...
    const { moviePrefix = &#39;Movie&#39;, showExtendedInfo = false } = this.props.customFields

    return (
      &lt;div className=&#39;movie-detail col-sm-12 col-md-8&#39;&gt;
        {/* We use the `moviePrefix` value before the Title */}
        &lt;h1&gt;&lt;span&gt;{moviePrefix}:&lt;/span&gt; {Title}&lt;/h1&gt;
        ...
        {/* we can use our boolean value `showExtendedInfo` to determine if certain data gets displayed or not */}
        {showExtendedInfo &amp;&amp;
          &lt;Fragment&gt;
            {Rated &amp;&amp; &lt;p&gt;&lt;strong&gt;Rated:&lt;/strong&gt; {Rated}&lt;/p&gt;}
            {Writer &amp;&amp; &lt;p&gt;&lt;strong&gt;Writer:&lt;/strong&gt; {Writer}&lt;/p&gt;}
            {Year &amp;&amp; &lt;p&gt;&lt;strong&gt;Year:&lt;/strong&gt; {Year}&lt;/p&gt;}
          &lt;/Fragment&gt;
        }
        ...
      &lt;/div&gt;
    )
  }
}

MovieDetail.propTypes = {
  customFields: PropTypes.shape({
    moviePrefix: PropTypes.string.isRequired,
    showExtendedInfo: PropTypes.bool
  })
}

export default MovieDetail
</pre></div>
</div>
<p>As you can see in the code and comments above, we defined a required <code class="docutils literal notranslate"><span class="pre">moviePrefix</span></code> custom field that should contain some text to prefix our movie title, and an optional <code class="docutils literal notranslate"><span class="pre">showExtendedInfo</span></code> field that is a boolean determining whether to show certain data in this view. These values will now be configurable in the PageBuilder Admin by editors, and we can use them just like any other data in our component to change its behavior!</p>
</div>
<div class="section" id="inline-editing">
<h2>Inline Editing<a class="headerlink" href="#inline-editing" title="Permalink to this headline">¶</a></h2>
<p>When we’re adding custom fields to a component, it’s easy for us as developers to think of how that custom field will work and what changing it will do to the component. But remember: PageBuilder is built for editors too! Our editors might not know what our <code class="docutils literal notranslate"><span class="pre">moviePrefix</span></code> custom field is meant to do, or any other custom field for that matter.</p>
<p>To make it clearer and easier for editors to configure custom fields, PageBuilder has “editable” custom fields. An editable field is one that can be edited inline from our “preview” in PageBuilder on the rendered page itself, rather than from a panel in the sidebar.</p>
<p>However, custom fields aren’t inline editable by default; it’s up to the Feature Pack developer to denote a custom field that should be inline editable, and which DOM element it is tied to. We can do that using the <code class="docutils literal notranslate"><span class="pre">editableField</span></code> prop that gets passed to <code class="docutils literal notranslate"><span class="pre">Consumer</span></code> decorated components. It’s a function takes the name of the field we want to edit as a string, and returns an array of attributes that PageBuilder uses to identify the element. Rather than printing the attributes out manually, it is considered best practice to use the <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax">ES6 spread operator</a> to enumerate the attributes directly on the element we want to edit.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/*  /components/features/movies/movie-detail.jsx  */

...
@Consumer
class MovieDetail extends Component {
  render () {
    return (
      &lt;div className=&#39;movie-detail col-sm-12 col-md-8&#39;&gt;
        {/* Invoking the `editableField` method with `moviePrefix` as the custom field it is tied to */}
        &lt;h1&gt;&lt;span {...this.props.editableField(&#39;moviePrefix&#39;)}&gt;{moviePrefix}:&lt;/span&gt; {Title}&lt;/h1&gt;
        ...
      &lt;/div&gt;
    )
  }
}

MovieDetail.propTypes = {
  customFields: PropTypes.shape({
    moviePrefix: PropTypes.string,
    showExtendedInfo: PropTypes.bool
  })
}

export default MovieDetail
</pre></div>
</div>
<p>In the above code, the <code class="docutils literal notranslate"><span class="pre">&lt;span&gt;</span></code> that contains our <code class="docutils literal notranslate"><span class="pre">moviePrefix</span></code> content will now be editable in the Admin Preview. When a PageBuilder editor focuses on the field and edits, whatever they type inside the <code class="docutils literal notranslate"><span class="pre">&lt;span&gt;</span></code> will be saved as the new value of the <code class="docutils literal notranslate"><span class="pre">moviePrefix</span></code> custom field.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="display-properties.html" class="btn btn-neutral float-right" title="Working with Display Properties" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="style.html" class="btn btn-neutral float-left" title="Adding Styling to Components" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Guess Me

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>