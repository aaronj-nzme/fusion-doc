

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Event Handling and Interaction &mdash; Fusion-Doc 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Defining a Content Source" href="content-source.html" />
    <link rel="prev" title="Creating a Chain Component" href="chain.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Fusion-Doc
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Components:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="output.html">Creating and Using Output Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="feature.html">Creating a Feature Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="layout.html">Creating a Layout Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="chain.html">Creating a Chain Component</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Event Handling and Interaction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#responding-to-events">Responding to events</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adding-some-state">Adding some state</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-a-toggle-method">Adding a toggle method</a></li>
<li class="toctree-l3"><a class="reference internal" href="#invoking-the-method">Invoking the method</a></li>
<li class="toctree-l3"><a class="reference internal" href="#displaying-the-data">Displaying the data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-whole-thing">The whole thing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Data:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="content-source.html">Defining a Content Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment.html">Using Environment Variables and “Secrets”</a></li>
<li class="toctree-l1"><a class="reference internal" href="consumer-hoc.html">Using the Consumer Higher-Order Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="fetching-content.html">Fetching Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuring-content.html">Dynamically Configuring Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="content-filtering.html">Content Filtering in Fusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="site-properties.html">Using Site Properties</a></li>
</ul>
<p class="caption"><span class="caption-text">General:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Folder.html">Examining the Feature Pack</a></li>
<li class="toctree-l1"><a class="reference internal" href="style.html">Adding Styling to Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom-fields.html">Adding Custom Fields to Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="display-properties.html">Working with Display Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="isomorphic-server-spa.html">Isomorphic vs. Server vs. SPA rendering</a></li>
<li class="toctree-l1"><a class="reference internal" href="messga-between-components.html">Messaging Between Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom-error-page.html">Using Custom Error Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="return-non-html-content-type.html">Creating a Web API Returning a Non-HTML Content Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="service-work.html">Using Service Workers with Fusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="local-webpack-states-file.html">Locally Generated Webpack Stats File</a></li>
<li class="toctree-l1"><a class="reference internal" href="static-features-outside-of-fusion.html">Including Static Features Outside of Fusion</a></li>
</ul>
<p class="caption"><span class="caption-text">Best Practices:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bp.html">Best Practices</a></li>
</ul>
<p class="caption"><span class="caption-text">Hooks:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="hooks-configuring-content.html">Dynamically Configuring Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="hooks-fetching-content.html">Fetching Content</a></li>
<li class="toctree-l1"><a class="reference internal" href="hooks-event-handling.html">Event Handling and Interaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="hooks.html">React Hooks</a></li>
</ul>
<p class="caption"><span class="caption-text">API:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api-output.html">Output Type API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-feature.html">Feature API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-layout.html">Layout API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-chain.html">Chain API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-custom-fields.html">Custom Fields API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-consumer.html">Consumer API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-context.html">Context Component API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-content.html">Content Component API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-static.html">Static Component API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-content-source.html">Content Source API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-plugins.html">Plugins API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-local-development-mock.html">Local Mocks API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-site-properties.html">Site Properties API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-fusion-http.html">Fusion HTTP API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Fusion-Doc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Event Handling and Interaction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/event-handling.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="event-handling-and-interaction">
<h1>Event Handling and Interaction<a class="headerlink" href="#event-handling-and-interaction" title="Permalink to this headline">¶</a></h1>
<p>Modern websites and web applications are expected to be engaging, interactive, and fast. For years, web developers have performed a delicate balancing act: trying to create web pages with rich client-side interactivity while avoiding the inherent complexity that comes with building and maintaining them. React has emerged as a powerful tool to simplify building feature-rich web pages, and we chose to build Fusion on top of it for that reason.</p>
<p>As with the rest of this documentation, we expect that you’re familiar with basic React, so we won’t go into detail on React’s syntax or best practices - but it can’t hurt to try out an example!</p>
<div class="section" id="responding-to-events">
<h2>Responding to events<a class="headerlink" href="#responding-to-events" title="Permalink to this headline">¶</a></h2>
<p>There’s nothing special about handling events in Fusion - you should just <a class="reference external" href="https://reactjs.org/docs/handling-events.html">use React as intended</a>. With that in mind, let’s adapt our <code class="docutils literal notranslate"><span class="pre">MovieDetail</span></code> component so we can prevent readers from seeing <a class="reference external" href="https://www.geeky-gadgets.com/wp-content/uploads/2009/09/movie-spoilers-t-shirt_1.jpg">spoilers</a> if they don’t want to.</p>
<p>We’ll add a simple feature that toggles the “Plot” to be shown or hidden based on a button click, and default it to hidden so readers don’t see the plot on page load. To do that, we’ll need a couple of things:</p>
<ul class="simple">
<li>We need some <code class="docutils literal notranslate"><span class="pre">state</span></code> in our component that keeps track of whether or not the plot is currently shown or hidden. We’ll call this boolean <code class="docutils literal notranslate"><span class="pre">isPlotShown</span></code> and default it to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</li>
<li>We need a method that will toggle the show/hide state of the plot. Let’s call it <code class="docutils literal notranslate"><span class="pre">togglePlot</span></code>.</li>
<li>We need something the user can interact with (probably a button) to invoke the toggle method.</li>
<li>We need to conditionally show the plot only if <code class="docutils literal notranslate"><span class="pre">isPlotShown</span></code> is true, and change the text of our button to “Show Plot” or “Hide Plot” depending on what state it’s in.</li>
</ul>
<div class="section" id="adding-some-state">
<h3>Adding some state<a class="headerlink" href="#adding-some-state" title="Permalink to this headline">¶</a></h3>
<p>First, we’ll add the <code class="docutils literal notranslate"><span class="pre">isPlotShown</span></code> key to the <code class="docutils literal notranslate"><span class="pre">state</span></code> of our component. This is how you would normally initialize some state in a React component - we need to accept <code class="docutils literal notranslate"><span class="pre">props</span></code> in the <code class="docutils literal notranslate"><span class="pre">constructor</span></code> and pass them to the <code class="docutils literal notranslate"><span class="pre">super</span></code> method as usual, then we can initialize the <code class="docutils literal notranslate"><span class="pre">state</span></code> object with whatever data we want. In this case, the only data we want to set is the <code class="docutils literal notranslate"><span class="pre">isPlotShown</span></code> key to <code class="docutils literal notranslate"><span class="pre">false</span></code>. We’ll do that in the class <code class="docutils literal notranslate"><span class="pre">constructor</span></code> method like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/*</span>  <span class="o">/</span><span class="n">components</span><span class="o">/</span><span class="n">features</span><span class="o">/</span><span class="n">movies</span><span class="o">/</span><span class="n">movie</span><span class="o">-</span><span class="n">detail</span><span class="o">.</span><span class="n">jsx</span>  <span class="o">*/</span>

<span class="k">class</span> <span class="nc">MovieDetail</span> <span class="n">extends</span> <span class="n">Component</span> <span class="p">{</span>
  <span class="n">constructor</span> <span class="p">(</span><span class="n">props</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">props</span><span class="p">)</span>
    <span class="n">this</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="p">{</span> <span class="n">isPlotShown</span><span class="p">:</span> <span class="n">false</span> <span class="p">}</span>
  <span class="p">}</span>
  <span class="o">...</span>
<span class="p">}</span>

<span class="n">export</span> <span class="n">default</span> <span class="n">MovieDetail</span>
</pre></div>
</div>
<p>Step one down!</p>
</div>
<div class="section" id="adding-a-toggle-method">
<h3>Adding a toggle method<a class="headerlink" href="#adding-a-toggle-method" title="Permalink to this headline">¶</a></h3>
<p>Next, we’ll need to create a method called <code class="docutils literal notranslate"><span class="pre">togglePlot</span></code> on our class to toggle the <code class="docutils literal notranslate"><span class="pre">isPlotShown</span></code> method when it’s invoked. Here we go:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/*  /components/features/movies/movie-detail.jsx  */

class MovieDetail extends Component {
  ...
  togglePlot () {
    this.setState(({ isPlotShown }) =&gt; ({ isPlotShown: !isPlotShown }))
  }
  ...
}

export default MovieDetail
</pre></div>
</div>
<p>Our method just destructures the <code class="docutils literal notranslate"><span class="pre">isPlotShown</span></code> key out of the <code class="docutils literal notranslate"><span class="pre">state</span></code> object, then uses <a class="reference external" href="https://reactjs.org/docs/react-component.html#setstate">React’s <code>setState</code> method</a> to set the new value to the inverse of the old one. Step two down!</p>
</div>
<div class="section" id="invoking-the-method">
<h3>Invoking the method<a class="headerlink" href="#invoking-the-method" title="Permalink to this headline">¶</a></h3>
<p>So we’ve got our togglePlot method ready to go - but it’s not being invoked by anything. We’d like it so that when a user clicks the “Show Plot” button, they see the plot shown, and when they click “Hide Plot”, the plot goes away.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/*  /components/features/movies/movie-detail.jsx  */

class MovieDetail extends Component {
  constructor (props) {
    super(props)
    this.state = { isPlotShown: false }

    // Let&#39;s bind the togglePlot function so that a new function doesn&#39;t get created with each render
    this.togglePlot = this.togglePlot.bind(this)
  }

  ...
  render () {
    const { isPlotShown } = this.state

    const plotButton = (
      &lt;button onClick={this.togglePlot}&gt;
        {isPlotShown ? &#39;Hide Plot&#39; : &#39;Show Plot&#39;}
      &lt;/button&gt;
    )

    const Plot = &#39;Lorem ipsum&#39;
    ...
  }
}

export default MovieDetail
</pre></div>
</div>
</div>
<div class="section" id="displaying-the-data">
<h3>Displaying the data<a class="headerlink" href="#displaying-the-data" title="Permalink to this headline">¶</a></h3>
<p>Now all that’s left to do is display our <code class="docutils literal notranslate"><span class="pre">Plot</span></code> and <code class="docutils literal notranslate"><span class="pre">plotButton</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/*  /components/features/movies/movie-detail.jsx  */

class MovieDetail extends Component {
  ...
  render () {
    const { isPlotShown } = this.state

    const plotButton = (
      &lt;button onClick={this.togglePlot}&gt;
        {isPlotShown ? &#39;Hide Plot&#39; : &#39;Show Plot&#39;}
      &lt;/button&gt;
    )

    const Plot = &#39;Lorem ipsum&#39;

    return (
      &lt;div className=&#39;movie-detail col-sm-12 col-md-8&#39;&gt;
        &lt;h1&gt;Jurassic Park&lt;/h1&gt;
        &lt;p&gt;&lt;strong&gt;Director:&lt;/strong&gt; Steven Spielberg&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;Actors:&lt;/strong&gt; Sam Neill, Laura Dern, Jeff Goldblum, Richard Attenborough&lt;/p&gt;

        {/* We&#39;re displaying the plot only if `isPlotShown` is truthy, and then rendering the `plotButton` */}
        &lt;p&gt;&lt;strong&gt;Plot:&lt;/strong&gt; {isPlotShown &amp;&amp; Plot} {plotButton}&lt;/p&gt;
        ...
      &lt;/div&gt;
    )
  }
}

export default MovieDetail
</pre></div>
</div>
<p>All that’s changed here is we’ve replaced the hardcoded “Lorem ipsum” text for our plot with the <code class="docutils literal notranslate"><span class="pre">Plot</span></code> const above, and rendered it conditionally based on the <code class="docutils literal notranslate"><span class="pre">isPlotShown</span></code> value. Then we display the <code class="docutils literal notranslate"><span class="pre">plotButton</span></code> right afterward.</p>
<p>Now if we refresh the page, we should see our “Show Plot” button where the “Lorem ipsum” text was, and be able to toggle the text back and forth by clicking “Show Plot” and “Hide Plot”. Great job!</p>
</div>
<div class="section" id="the-whole-thing">
<h3>The whole thing<a class="headerlink" href="#the-whole-thing" title="Permalink to this headline">¶</a></h3>
<p>Here’s what our full component looks like now:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/*  /components/features/movies/movie-detail.jsx  */

import React, { Component } from &#39;react&#39;

class MovieDetail extends Component {
  constructor (props) {
    super(props)
    this.state = { isPlotShown: false }
  }

  togglePlot () {
    this.setState(({ isPlotShown }) =&gt; ({ isPlotShown: !isPlotShown }))
  }

  render () {
    const { isPlotShown } = this.state

    const plotButton = (
      &lt;button onClick={this.togglePlot.bind(this)}&gt;
        {isPlotShown ? &#39;Hide Plot&#39; : &#39;Show Plot&#39;}
      &lt;/button&gt;
    )

    const Plot = &#39;Lorem ipsum&#39;

    return (
      &lt;div className=&#39;movie-detail col-sm-12 col-md-8&#39;&gt;
        &lt;h1&gt;Jurassic Park&lt;/h1&gt;
        &lt;p&gt;&lt;strong&gt;Director:&lt;/strong&gt; Steven Spielberg&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;Actors:&lt;/strong&gt; Sam Neill, Laura Dern, Jeff Goldblum, Richard Attenborough&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;Plot:&lt;/strong&gt; {isPlotShown &amp;&amp; Plot} {plotButton}&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;Rated:&lt;/strong&gt; PG-13&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;Writer:&lt;/strong&gt; Michael Crichton (novel), Michael Crichton (screenplay), David Koepp (screenplay)&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;Year:&lt;/strong&gt; 1993&lt;/p&gt;
        &lt;img src=&#39;https://m.media-amazon.com/images/M/MV5BMjM2MDgxMDg0Nl5BMl5BanBnXkFtZTgwNTM2OTM5NDE@._V1_SX300.jpg&#39; alt={`Poster for Jurassic Park`} /&gt;
      &lt;/div&gt;
    )
  }
}

MovieDetail.label = &#39;Movie Detail&#39;

export default MovieDetail
</pre></div>
</div>
<p>While this was a simple example of how to add client-side interactivity to a React component in Fusion, it should illustrate that there’s nothing different about handling events in standard React vs. Fusion.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="content-source.html" class="btn btn-neutral float-right" title="Defining a Content Source" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="chain.html" class="btn btn-neutral float-left" title="Creating a Chain Component" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Guess Me

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>